<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xCopilot æœç´¢åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
        }
        .test-container {
            border: 1px solid #ccc;
            padding: 20px;
            border-radius: 8px;
            background: #f9f9f9;
        }
        #xcopilot-search-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #eff3f4;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 10px;
        }
        #xcopilot-simple-search-btn {
            width: 100%;
            padding: 12px;
            background: #1d9bf0;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
        }
        #xcopilot-simple-search-btn:hover {
            background: #1a8cd8;
        }
        .log {
            margin-top: 20px;
            padding: 10px;
            background: #000;
            color: #0f0;
            font-family: monospace;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>xCopilot æœç´¢åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-container">
        <h3>æœç´¢æµ‹è¯•</h3>
        <input type="text" id="xcopilot-search-input" placeholder="è¾“å…¥æœç´¢å…³é”®è¯...">
        <button id="xcopilot-simple-search-btn">æœç´¢</button>
        
        <div class="log" id="log"></div>
    </div>

    <script>
        // æ—¥å¿—å‡½æ•°
        function log(message) {
            const logDiv = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${time}] ${message}<br>`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        }
        
        // æœç´¢åŠŸèƒ½æµ‹è¯•
        function setupTest() {
            log("ğŸš€ å¼€å§‹è®¾ç½®æœç´¢åŠŸèƒ½æµ‹è¯•...");
            
            const simpleSearchBtn = document.getElementById('xcopilot-simple-search-btn');
            const searchInput = document.getElementById('xcopilot-search-input');
            
            log(`âœ… æ‰¾åˆ°å…ƒç´  - æŒ‰é’®: ${!!simpleSearchBtn}, è¾“å…¥æ¡†: ${!!searchInput}`);
            
            // æœç´¢å‡½æ•°
            const performSearch = () => {
                log("ğŸ” å¼€å§‹æœç´¢...");
                
                if (!searchInput) {
                    log("âŒ æœç´¢è¾“å…¥æ¡†æœªæ‰¾åˆ°!");
                    return;
                }
                
                const query = searchInput.value ? searchInput.value.trim() : '';
                log(`ğŸ” æœç´¢å…³é”®è¯: "${query}"`);
                
                if (!query) {
                    log("âŒ æœç´¢å…³é”®è¯ä¸ºç©º");
                    alert("è¯·è¾“å…¥æœç´¢å…³é”®è¯");
                    return;
                }
                
                // æ„å»ºæœç´¢URL
                const searchUrl = `https://x.com/search?q=${encodeURIComponent(query)}&f=live`;
                log(`ğŸ” æœç´¢URL: ${searchUrl}`);
                
                // æ·»åŠ è§†è§‰åé¦ˆ
                if (simpleSearchBtn) {
                    simpleSearchBtn.textContent = "æœç´¢ä¸­...";
                    simpleSearchBtn.disabled = true;
                }
                
                // è·³è½¬
                log("ğŸ” å‡†å¤‡è·³è½¬...");
                try {
                    // åœ¨æµ‹è¯•é¡µé¢ä¸­ï¼Œæˆ‘ä»¬ç”¨window.openä»£æ›¿ç›´æ¥è·³è½¬
                    window.open(searchUrl, '_blank');
                    log("âœ… è·³è½¬æˆåŠŸ!");
                    
                    // æ¢å¤æŒ‰é’®çŠ¶æ€
                    setTimeout(() => {
                        if (simpleSearchBtn) {
                            simpleSearchBtn.textContent = "æœç´¢";
                            simpleSearchBtn.disabled = false;
                        }
                    }, 1000);
                } catch (error) {
                    log(`âŒ è·³è½¬å¤±è´¥: ${error.message}`);
                    // æ¢å¤æŒ‰é’®çŠ¶æ€
                    if (simpleSearchBtn) {
                        simpleSearchBtn.textContent = "æœç´¢";
                        simpleSearchBtn.disabled = false;
                    }
                }
            };
            
            // è®¾ç½®æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            if (simpleSearchBtn) {
                log("ğŸ”§ è®¾ç½®æŒ‰é’®ç‚¹å‡»äº‹ä»¶");
                simpleSearchBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    log("ğŸ” æŒ‰é’®è¢«ç‚¹å‡»!");
                    performSearch();
                });
            }
            
            // è®¾ç½®è¾“å…¥æ¡†äº‹ä»¶
            if (searchInput) {
                log("ğŸ”§ è®¾ç½®è¾“å…¥æ¡†äº‹ä»¶");
                
                // å›è½¦é”®æœç´¢
                searchInput.addEventListener('keypress', (e) => {
                    log(`âŒ¨ï¸ æŒ‰é”®: ${e.key}`);
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        e.stopPropagation();
                        log("âŒ¨ï¸ æ£€æµ‹åˆ°å›è½¦é”®!");
                        performSearch();
                    }
                });
                
                // ä¹Ÿç›‘å¬keydownä½œä¸ºå¤‡é€‰
                searchInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        e.stopPropagation();
                        log("âŒ¨ï¸ æ£€æµ‹åˆ°å›è½¦é”® (keydown)!");
                        performSearch();
                    }
                });
                
                log("âœ… è¾“å…¥æ¡†äº‹ä»¶è®¾ç½®æˆåŠŸ");
            }
            
            log("âœ… æ‰€æœ‰äº‹ä»¶è®¾ç½®å®Œæˆ");
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè®¾ç½®æµ‹è¯•
        document.addEventListener('DOMContentLoaded', setupTest);
    </script>
</body>
</html> 