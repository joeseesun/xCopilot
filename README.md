# xCopilot - 智能X搜索助手

## 产品简介
xCopilot是一个Chrome浏览器扩展，专门为X（Twitter）用户提供**智能化搜索体验**。我们将复杂的X搜索操作符转换为直观易用的界面，让每个用户都能轻松进行高级搜索，无需记住繁琐的搜索语法。

### 核心价值
- **化繁为简**: 将68个复杂的X搜索操作符转换为直观的可视化界面
- **智能感知**: 在用户主页自动识别当前用户，提供个性化搜索体验
- **原生集成**: 直接替换X页面右侧栏，提供无缝的用户体验
- **即时搜索**: 实时预览搜索结果，所见即所得

## 功能特性

### 🎯 智能搜索系统
- **用户感知搜索**: 
    - 在用户主页时，侧边栏顶部提供专属搜索框，可直接搜索该用户的推文。
    - 在用户主页时，原有的"简单搜索"和"高级搜索"也会默认针对该用户的推文。
    - 智能识别系统页面（首页、搜索页等），避免错误的用户上下文检测。
- **智能搜索结果**: 
    - 默认显示热门内容（f=top），提供更有价值的搜索结果
    - 自动添加用户限定条件（from:username）当在用户页面时
    - 支持推文详情页、用户子页面等多种页面类型
- **可视化操作符**: 将复杂的搜索语法转换为简单的选择和输入
- **实时预览**: 搜索条件变化时即时显示结果
- **搜索历史**: 保存常用搜索条件，一键重用

### 🔍 高级搜索功能
基于X平台的68个搜索操作符，提供以下直观功能：

#### 内容搜索
- **关键词搜索**: 支持多关键词组合（AND/OR逻辑）
- **精确短语**: 双引号精确匹配
- **排除词汇**: 简单勾选排除不想要的内容
- **话题标签**: 可视化选择和输入hashtag
- **股票代码**: 专门的cashtag搜索界面

#### 用户筛选
- **指定用户**: 搜索特定用户的推文（from:）
- **提及用户**: 查找提及特定用户的推文（@）
- **回复筛选**: 查找回复特定用户的推文（to:）
- **认证筛选**: 区分普通认证和蓝V认证用户

#### 内容类型
- **媒体筛选**: 图片、视频、链接等内容类型
- **互动筛选**: 按点赞、转发、回复数量筛选
- **推文类型**: 原创推文、回复、转发、引用推文

#### 时间范围
- **日期选择器**: 可视化选择开始和结束日期
- **快速选项**: 今天、昨天、本周、本月等快捷选择
- **相对时间**: 最近2小时、3天等相对时间筛选

#### 地理位置
- **城市搜索**: 输入城市名自动补全
- **范围设置**: 可视化设置搜索半径
- **坐标搜索**: 支持精确的经纬度搜索

### 🎨 用户界面特性
- **右侧栏替换**: 直接替换X原生右侧栏，完全融入原生界面
- **顶部用户搜索**: 在用户个人资料页，侧边栏顶部会显示一个专用搜索框，方便快速搜索当前用户的帖子。
- **智能提示**: 通用搜索框显示"搜索 [用户名] 的推文..."等个性化提示（当在用户页面时）。
- **分步引导**: 复杂搜索条件的分步设置向导
- **搜索预设**: 常用搜索组合的快速模板

### 🔧 技术特性
- **实时翻译**: 将用户的可视化选择实时转换为X搜索语法
- **语法验证**: 确保生成的搜索语法正确有效
- **性能优化**: 智能缓存和去重，提升搜索速度
- **错误处理**: 友好的错误提示和修复建议

### 👥 好友管理
- **快速@好友**：一键复制好友的@用户名到剪贴板
- **好友跳转**：点击好友卡片直接跳转到其X页面
- **Tab式管理界面**：
  - **添加好友Tab**：专门用于添加新的特别关注用户
  - **管理好友Tab**：用于编辑、删除、排序现有好友
- **完整管理功能**：
  - ✅ 添加新好友（自定义显示名称和X用户名）
  - ✅ 编辑好友信息（修改名称和用户名）
  - ✅ 删除好友
  - ✅ 排序好友（按名称排序）
  - ✅ 上下移动好友位置
  - ✅ 重置为默认好友列表
  - ✅ 成功提示和回车键快捷操作

## 使用场景

### 场景1: 用户主页搜索
当您访问某个用户的X主页（如 x.com/elonmusk）时：
- **快速用户搜索**: 侧边栏顶部将出现一个搜索框，提示"搜索当前用户推文..."。在此输入关键词并点击"搜索"，即可查找该用户发布的包含这些关键词的推文。
- **通用搜索框**: 下方的通用搜索框也会自动显示"搜索 Elon Musk 的推文..."，所有通过"简单搜索"或"高级搜索"进行的查询都将默认限定在该用户的内容范围内。
- 可以搜索该用户关于特定话题的推文
- 支持按时间筛选该用户的历史推文

### 场景2: 高级内容发现
- **热门话题**: 搜索特定话题下的高互动推文
- **新闻追踪**: 查找来自认证媒体账号的相关新闻
- **趋势分析**: 按时间范围分析话题发展趋势
- **用户互动**: 查找用户之间的对话和互动

### 场景3: 专业研究
- **舆情监控**: 监控品牌或产品的提及情况
- **竞品分析**: 分析竞争对手的社交媒体活动
- **市场研究**: 收集特定行业或话题的用户观点
- **学术研究**: 收集和分析社交媒体数据

## 技术架构

### 搜索引擎核心
```javascript
// 搜索条件构建器
class SearchQueryBuilder {
    constructor() {
        this.conditions = [];
        this.currentUser = null;
    }
    
    // 添加用户条件
    addUserCondition(username, type = 'from') {
        this.conditions.push(`${type}:${username}`);
        return this;
    }
    
    // 添加内容条件
    addContentCondition(keywords, exact = false) {
        if (exact) {
            this.conditions.push(`"${keywords}"`);
        } else {
            this.conditions.push(keywords);
        }
        return this;
    }
    
    // 生成最终搜索语法
    build() {
        return this.conditions.join(' ');
    }
}
```

### 用户感知系统
```javascript
// 用户检测器
class UserDetector {
    detectCurrentUser() {
        const url = window.location.href;
        const userMatch = url.match(/x\.com\/([^\/\?]+)/);
        if (userMatch && !this.isSpecialPage(userMatch[1])) {
            return {
                username: userMatch[1],
                displayName: this.extractDisplayName(),
                isUserPage: true
            };
        }
        return { isUserPage: false };
    }
}
```

### 搜索界面组件
- **SearchBuilder**: 可视化搜索条件构建器
- **UserDetector**: 智能用户页面检测
- **QueryTranslator**: 搜索条件到X语法的转换器
- **ResultsPreview**: 实时搜索结果预览
- **SearchHistory**: 搜索历史管理

## 安装和使用

### 快速开始
1. 安装Chrome扩展
2. 访问任意X页面，右侧栏会自动被xCopilot智能搜索界面替换
3. **用户主页专项搜索**: 当您在某个用户的个人主页 (例如 x.com/elonmusk) 时，xCopilot侧边栏的顶部会提供一个专用搜索框，让您能快速搜索当前显示用户的推文。
4. **通用搜索**: 使用侧边栏中的"简单搜索"或"高级搜索"功能。在用户主页时，这些搜索也会自动针对该用户。使用可视化界面设置搜索条件，无需记住复杂语法。

### 搜索示例

#### 基础搜索
- **搜索当前用户推文**: 访问 x.com/username，在侧边栏顶部的专用搜索框输入关键词，点击搜索。
- **全局推文搜索**: 使用侧边栏中的"简单搜索"输入框搜索所有推文。
- **排除内容**: 勾选"排除"选项，输入不想看到的词汇
- **时间筛选**: 选择"最近7天"快速筛选时间范围

#### 高级搜索
- **高互动内容**: 设置"最少100个点赞"筛选热门推文
- **媒体内容**: 勾选"仅显示图片"或"仅显示视频"
- **认证用户**: 选择"仅认证用户"或"仅蓝V用户"

#### 专业搜索
- **地理位置**: 输入"北京"，设置"10公里"范围
- **多用户对话**: 搜索两个用户之间的互动
- **话题追踪**: 组合多个相关hashtag进行话题分析

### 好友管理

#### 添加好友
1. 点击好友区域右上角的⚙️管理按钮
2. 在弹出的管理界面中，确保选中"添加好友"tab
3. 在"显示名称"框中输入好友的昵称（如：花生）
4. 在"X用户名"框中输入用户名（如：PMbackttfuture）
5. 点击"添加关注"按钮或按回车键
6. 成功添加后会显示绿色的成功提示

#### 使用好友功能
- **复制@用户名**：点击好友卡片右侧的📋按钮
- **访问好友页面**：点击好友卡片的其他区域

#### 管理现有好友
1. 点击⚙️管理按钮打开管理面板
2. 切换到"管理好友"tab
3. 在好友列表中：
   - 修改好友信息后点击💾保存
   - 点击🗑️删除好友
   - 使用↑↓按钮调整好友顺序
4. 使用"排序"按钮自动按名称排序
5. 使用"重置"按钮恢复默认好友列表

### 默认好友列表
扩展预设了以下好友：
- 橘子 (@oran_ge)
- 小互 (@imxiaohu)
- 福祥 (@fuxiangPro)
- 七娘 (@GlocalTerapy)
- 歸藏 (@op7418)

## 开发进度

### 第一阶段 ✅ (已完成)
- [x] 基础架构和右侧栏替换
- [x] 用户页面智能检测
- [x] 基础搜索功能
- [x] 演示数据和界面

### 第二阶段 🚧 (开发中)
- [ ] **智能搜索构建器**: 可视化搜索条件设置界面
- [ ] **操作符翻译器**: 将用户选择转换为X搜索语法
- [ ] **实时预览**: 搜索条件变化时的即时结果预览
- [ ] **搜索模板**: 常用搜索组合的快速模板

### 第三阶段 📋 (计划中)
- [ ] **X API集成**: 连接真实的X搜索API
- [ ] **搜索历史**: 保存和管理搜索历史
- [ ] **高级筛选**: 更多复杂的搜索条件组合
- [ ] **数据导出**: 搜索结果的导出功能

### 第四阶段 🔮 (未来规划)
- [ ] **AI搜索助手**: 自然语言搜索转换
- [ ] **搜索分析**: 搜索结果的数据分析和可视化
- [ ] **协作功能**: 分享搜索条件和结果
- [ ] **API开放**: 为开发者提供搜索能力API

## 技术特性

### Chrome Extension Manifest V3
- 使用最新的Manifest V3规范
- Service Worker后台脚本
- 安全的内容安全策略(CSP)
- 最小权限原则

### 右侧栏替换技术
- 智能检测X右侧栏元素
- 多种选择器策略确保兼容性
- 结构分析算法识别布局
- 完美替换原生界面元素

### 用户感知系统
- URL路由分析识别用户页面
- 实时监听页面导航变化
- 动态更新搜索范围和提示
- 个性化用户体验

### 数据管理
- Chrome Storage API本地存储
- 智能数据缓存机制
- 自动清理过期数据
- 数据导入导出功能

### 用户体验
- 响应式设计适配不同屏幕
- 流畅的动画效果
- 直观的操作界面
- 完善的错误处理
- 高质量的视觉设计

### 图标设计
- **专业制作**: 基于项目logo制作的多尺寸图标
- **完整规格**: 16x16、32x32、48x48、128x128像素
- **优化压缩**: 文件大小优化，加载速度快
- **视觉一致**: 保持品牌视觉统一性

## 注意事项

### 权限说明
- **存储权限**: 用于保存用户设置和推文缓存
- **网络权限**: 用于获取X数据
- **标签页权限**: 用于在新标签页打开推文链接
- **脚本注入权限**: 用于在X页面替换右侧栏

### 隐私保护
- 所有数据仅存储在本地
- 不会收集或上传用户隐私信息
- 遵循Chrome Web Store隐私政策

### 技术限制
- 需要X API访问权限（开发中）
- 受X API调用频率限制
- 需要用户授权访问X数据

## 开发说明

### 当前状态
项目已完成基础架构和核心功能开发，包括：
- 完整的右侧栏替换系统
- 用户页面智能检测
- 基础搜索功能
- 演示数据展示
- 专业图标资源

### 演示模式
当前版本使用模拟数据进行演示，包含：
- 3条示例推文
- 随机的互动数据
- 不同时间的推文分布
- 完整的功能演示
- 用户页面个性化内容

### 下一步开发
1. 集成X API
2. 实现用户认证
3. 获取真实推文数据
4. 完善错误处理
5. 性能优化

## 更新日志

### v1.0.2 (当前版本)
- 实现右侧栏直接替换功能
- 添加用户页面智能检测
- 实现个性化搜索功能
- 优化用户体验，提供原生般的集成
- 添加恢复原始右侧栏功能

### v1.0.1 (前一版本)
- 实现侧边栏直接注入到X页面
- 添加侧边栏控制功能（最小化、关闭）
- 优化用户体验，类似原生功能
- 完善图标和视觉设计

### v1.0.0 (基础版本)
- 完整的用户界面实现
- 搜索和筛选功能
- 数据存储管理系统
- 设置和主题切换
- 演示数据展示
- 现代化UI设计

### v2024.01.20
- ✨ 新增完整的好友管理系统
- ✨ 支持自定义好友添加、编辑、删除
- ✨ 好友排序和位置调整功能
- ✨ 现代化管理界面设计
- 🐛 修复侧边栏重复创建问题
- 🎨 优化深色模式适配

## 贡献指南
欢迎提交Issue和Pull Request来改进这个项目。

## 许可证
MIT License

---
*本项目由AI进化论-花生创建，专为提升X内容管理体验而设计。* 